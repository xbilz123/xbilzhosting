<!doctype html>
<html lang="id">
<head>
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width,initial-scale=1">
  <title>VPS Store — Jual VPS Otomatis</title>
  <meta name="description" content="Toko VPS otomatis: pilih paket, bayar, dan VPS dibuat otomatis lewat API.">
  <style>
    :root{--bg:#0b1220;--card:#081026;--accent:#45b3ff;--muted:#9fb0c2;--radius:12px;font-family:Inter,ui-sans-serif,system-ui,Segoe UI,Roboto,Arial}
    *{box-sizing:border-box}
    body{margin:0;min-height:100vh;background:linear-gradient(180deg,#041025 0%,#071a2a 100%);color:#eef6ff}
    .container{max-width:1100px;margin:28px auto;padding:20px}
    header{display:flex;justify-content:space-between;align-items:center}
    .logo{font-weight:800;letter-spacing:0.4px}
    nav a{color:var(--muted);margin-left:12px}
    .hero{display:flex;gap:24px;align-items:center;margin-top:20px}
    .hero .txt{flex:1}
    .hero h1{margin:0;font-size:28px}

    .plans{display:grid;grid-template-columns:repeat(3,1fr);gap:16px;margin-top:18px}
    .plan{background:var(--card);padding:18px;border-radius:var(--radius);border:1px solid rgba(255,255,255,0.03)}
    .plan h3{margin:0 0 8px}
    .price{font-size:20px;font-weight:700;margin-bottom:12px}
    .btn{display:inline-block;padding:10px 14px;border-radius:10px;background:var(--accent);color:#02243f;font-weight:700;border:none;cursor:pointer}

    /* modal */
    .modal{position:fixed;inset:0;display:none;align-items:center;justify-content:center;background:rgba(0,0,0,0.45)}
    .modal.active{display:flex}
    .modal .panel{width:520px;background:#051428;padding:18px;border-radius:12px}

    .form-row{display:flex;gap:8px}
    input,select,textarea{width:100%;padding:10px;border-radius:8px;border:1px solid rgba(255,255,255,0.04);background:transparent;color:inherit}
    footer{margin-top:24px;color:var(--muted);font-size:13px}

    @media (max-width:900px){.plans{grid-template-columns:1fr}.hero{flex-direction:column}.modal .panel{width:92%}}
  </style>
</head>
<body>
  <div class="container">
    <header>
      <div class="logo">VPS Store <span style="color:var(--accent);font-weight:700">— Otomatis</span></div>
      <nav>
        <a href="#plans">Paket</a>
        <a href="#how">Cara Kerja</a>
        <a href="#contact">Kontak</a>
      </nav>
    </header>

    <section class="hero">
      <div class="txt">
        <h1>Jual VPS otomatis — dari order sampai provisioning</h1>
        <p style="color:var(--muted)">Pelanggan pilih paket, bayar (Stripe/PayPal), dan VPS dibuat otomatis via API (DigitalOcean/Vultr/Cloud provider). Template ini sudah siap untuk dihubungkan ke backend.</p>
      </div>
      <div>
        <button class="btn" onclick="scrollToPlans()">Lihat Paket</button>
      </div>
    </section>

    <section id="plans" style="margin-top:18px">
      <h2>Pilih Paket</h2>
      <div class="plans">
        <div class="plan">
          <h3>VPS Starter</h3>
          <div class="price">Rp 45.000 / bulan</div>
          <ul style="color:var(--muted);padding-left:18px">
            <li>1 vCPU • 1 GB RAM • 25 GB SSD</li>
            <li>Lokasi: Singapore</li>
            <li>Provisioning otomatis</li>
          </ul>
          <div style="margin-top:12px"><button class="btn" onclick="orderPlan('starter')">Pesan</button></div>
        </div>

        <div class="plan">
          <h3>VPS Regular</h3>
          <div class="price">Rp 95.000 / bulan</div>
          <ul style="color:var(--muted);padding-left:18px">
            <li>2 vCPU • 4 GB RAM • 80 GB SSD</li>
            <li>Lokasi: Singapore</li>
            <li>Provisioning otomatis + snapshot</li>
          </ul>
          <div style="margin-top:12px"><button class="btn" onclick="orderPlan('regular')">Pesan</button></div>
        </div>

        <div class="plan">
          <h3>VPS Pro</h3>
          <div class="price">Rp 195.000 / bulan</div>
          <ul style="color:var(--muted);padding-left:18px">
            <li>4 vCPU • 8 GB RAM • 160 GB SSD</li>
            <li>Lokasi: Singapore / Tokyo</li>
            <li>Otomatis + backups</li>
          </ul>
          <div style="margin-top:12px"><button class="btn" onclick="orderPlan('pro')">Pesan</button></div>
        </div>
      </div>
    </section>

    <section id="how" style="margin-top:22px" class="card">
      <h2>Cara Kerja</h2>
      <ol style="color:var(--muted)">
        <li>Pilih paket dan isi data order.</li>
        <li>Sistem mengarahkan ke pembayaran (Stripe/PayPal).</li>
        <li>Setelah pembayaran sukses, server memanggil API provider (mis. DigitalOcean) untuk membuat VPS.</li>
        <li>Informasi login VPS dikirim ke email pelanggan dan muncul di dashboard.</li>
      </ol>
    </section>

    <section id="contact" style="margin-top:22px">
      <h2>Kontak & Setup</h2>
      <p style="color:var(--muted)">Saya bisa bantu pasang: Stripe Checkout, webhook verifikasi, provisioning via DigitalOcean/Vultr, panel pelanggan sederhana, dan email otomatis.</p>
      <p style="color:var(--muted)">Untuk demo cepat, pakai lingkungan development lalu hubungkan kunci API di backend (.env).</p>
    </section>

    <footer>
      <div style="margin-top:18px;color:var(--muted)">© VPS Store • Template untuk penjualan VPS otomatis</div>
    </footer>
  </div>

  <!-- ORDER MODAL -->
  <div id="modal" class="modal">
    <div class="panel">
      <h3 id="modal-title">Order</h3>
      <form id="order-form" onsubmit="submitOrder(event)">
        <input type="hidden" id="plan-id">
        <label>Nama</label>
        <input id="cust-name" required>
        <label>Email</label>
        <input id="cust-email" type="email" required>
        <label>Hostname (contoh: myserver)</label>
        <input id="hostname" placeholder="myserver" required>
        <label>Lokasi / Region</label>
        <select id="region">
          <option value="sgp1">Singapore</option>
          <option value="tk1">Tokyo</option>
        </select>
        <div style="display:flex;gap:8px;margin-top:12px;justify-content:flex-end">
          <button type="button" class="btn" onclick="closeModal()" style="background:transparent;color:var(--muted);border:1px solid rgba(255,255,255,0.04)">Batal</button>
          <button type="submit" class="btn">Bayar & Provis</button>
        </div>
      </form>

      <hr style="border:none;height:1px;background:rgba(255,255,255,0.03);margin:12px 0">
      <div style="color:var(--muted);font-size:13px">Catatan: implementasi backend diperlukan. Contoh server (Node.js + Express) ada di bawah untuk membantu integrasi.</div>
    </div>
  </div>

  <script>
    function scrollToPlans(){document.getElementById('plans').scrollIntoView({behavior:'smooth'})}
    function orderPlan(id){
      const labels = {starter:'VPS Starter',regular:'VPS Regular',pro:'VPS Pro'};
      document.getElementById('modal-title').innerText = 'Pesan — ' + labels[id];
      document.getElementById('plan-id').value = id;
      document.getElementById('modal').classList.add('active');
    }
    function closeModal(){document.getElementById('modal').classList.remove('active')}

    async function submitOrder(e){
      e.preventDefault();
      const data = {
        plan: document.getElementById('plan-id').value,
        name: document.getElementById('cust-name').value.trim(),
        email: document.getElementById('cust-email').value.trim(),
        hostname: document.getElementById('hostname').value.trim(),
        region: document.getElementById('region').value,
      };

      // POST ke backend untuk membuat session pembayaran dan memulai provisioning setelah sukses
      try{
        const res = await fetch('/api/create-checkout-session', {
          method:'POST',headers:{'Content-Type':'application/json'},body:JSON.stringify(data)
        });
        const j = await res.json();
        if(j.url){
          // redirect ke Stripe Checkout (atau halaman bayar)
          window.location.href = j.url;
        } else if(j.error){
          alert('Gagal: ' + j.error);
        } else {
          alert('Respons tak terduga dari server');
        }
      } catch(err){
        console.error(err);alert('Gagal menghubungi server');
      }
    }
  </script>

  <!-- BACKEND SAMPLE (README style) -->
  <!--
    Contoh backend (Node.js + Express) — simpan sebagai server.js

    1) Instal: npm install express stripe axios body-parser dotenv
    2) Buat file .env dengan:
       STRIPE_SECRET=sk_test_xxx
       STRIPE_WEBHOOK_SECRET=whsec_xxx
       DO_TOKEN=do_api_token_here
       YOUR_DOMAIN=https://yourdomain.com

    3) Jalankan: node server.js

    server.js (contoh):
-->
  <pre style="display:none">
// server.js (Node/Express sample)
const express = require('express');
const bodyParser = require('body-parser');
const stripe = require('stripe')(process.env.STRIPE_SECRET);
const axios = require('axios');
require('dotenv').config();

const app = express();
app.use(bodyParser.json());

// simple price map (kamu bisa ambil dari DB)
const PRICES = {starter:45000, regular:95000, pro:195000};

app.post('/api/create-checkout-session', async (req,res)=>{
  const {plan,name,email,hostname,region} = req.body;
  if(!PRICES[plan]) return res.status(400).json({error:'Invalid plan'});

  try{
    // create a Stripe Checkout session
    const session = await stripe.checkout.sessions.create({
      payment_method_types:['card'],
      mode:'payment',
      line_items:[{
        price_data:{
          currency:'idr',
          product_data:{name:`VPS - ${plan}`},
          unit_amount: PRICES[plan]*100 // Stripe expects cents; be careful with currencies
        },
        quantity:1
      }],
      success_url: `${process.env.YOUR_DOMAIN}/success?session_id={CHECKOUT_SESSION_ID}`,
      cancel_url: `${process.env.YOUR_DOMAIN}/cancel`,
      metadata:{plan, name, email, hostname, region}
    });
    res.json({url: session.url});
  }catch(err){
    console.error(err);res.status(500).json({error:err.message});
  }
});

// webhook untuk menerima event dari Stripe (pembayaran sukses)
app.post('/api/webhook', bodyParser.raw({type:'application/json'}), async (req,res)=>{
  const sig = req.headers['stripe-signature'];
  let event;
  try{
    event = stripe.webhooks.constructEvent(req.body, sig, process.env.STRIPE_WEBHOOK_SECRET);
  }catch(err){ console.error('Webhook signature error', err.message); return res.status(400).send(`Webhook Error`); }

  if(event.type === 'checkout.session.completed'){
    const session = event.data.object;
    // ambil metadata
    const {plan, name, email, hostname, region} = session.metadata || {};
    // provisioning: panggil provider (contoh: DigitalOcean)
    try{
      const doResp = await axios.post('https://api.digitalocean.com/v2/droplets', {
        name: `${hostname}`,
        region: region || 'sgp1',
        size: plan === 'starter' ? 's-1vcpu-1gb' : (plan==='regular'?'s-2vcpu-4gb':'s-4vcpu-8gb'),
        image: 'ubuntu-22-04-x64',
        tags: ['vps-store']
      },{
        headers:{'Authorization':`Bearer ${process.env.DO_TOKEN}`, 'Content-Type':'application/json'}
      });

      // simpan hasil provisioning ke DB / kirim email ke pelanggan
      console.log('Droplet created:', doResp.data);
      // TODO: kirim email / update dashboard
    }catch(provErr){ console.error('Provisioning failed', provErr.response ? provErr.response.data : provErr.message); }
  }

  res.json({received:true});
});

app.listen(3000, ()=>console.log('Server running on port 3000'));
  </pre>

</body>
</html>
